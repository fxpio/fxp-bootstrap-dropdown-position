var FxpDropdownPosition=function(t,m){"use strict";function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function r(t,o){for(var e=0;e<o.length;e++){var r=o[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,o,e){return o&&r(t.prototype,o),e&&r(t,e),t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e(t,o){return(e=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n(t,o,e){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,o,e){var r=function(t,o){for(;!Object.prototype.hasOwnProperty.call(t,o)&&null!==(t=l(t)););return t}(t,o);if(r){var n=Object.getOwnPropertyDescriptor(r,o);return n.get?n.get.call(e):n.value}})(t,o,e||t)}m=m&&m.hasOwnProperty("default")?m.default:m;var i={},s=function(){function e(t){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};d(this,e),this.guid=m.guid,this.options=m.extend(!0,{},this.constructor.defaultOptions,o),this.$element=m(t)}return o(e,[{key:"destroy",value:function(){var o=this;Object.keys(o).forEach(function(t){delete o[t]})}}],[{key:"defaultOptions",set:function(t){i[this.name]=m.extend(!0,{},i[this.name],t)},get:function(){return void 0===i[this.name]&&(i[this.name]={}),i[this.name]}}]),e}();function v(t,o,e){var r,n,i,s,a,d,l=!1,p=Math.round(e.left)-parseInt(t.css("border-left-width"),10),c=Math.round(e.top-m(window).eq(0).scrollTop())-parseInt(t.css("border-top-width"),10),u=m(window).width()-15*(t.hasClass("wrapper-pull-height")?2:1),f=m(window).height()-15*(t.hasClass("wrapper-pull-height")?2:1);t.css({left:p,top:c,"max-width":u,"max-height":f}),i=p+(r=t.outerWidth()),s=c+(n=t.outerHeight()),t.hasClass("wrapper-pull-height")&&p!==t.offset().left&&(s=(c=m(window).height()/2-n/2)+n,l=!0,t.css("max-height",f-=15)),t.hasClass("wrapper-pull-right")?p=Math.max(p,15):15<e.left&&(u<i&&(p=u-r),p=Math.max(p,15)),(15<e.top||l)&&(f<s&&(c=f-n),c=Math.max(c,15)),t.css({left:p,top:c}),o.css({width:t.innerWidth()-(a=o,d=parseInt(a.css("margin-right"),0),isNaN(d)?0:d),height:t.innerHeight()}),"function"==typeof m.fn.scroller&&o.scroller("resizeScrollbar")}function x(t){var o=parseInt(t.css("z-index"),0);return isNaN(o)&&(o=0),o}function C(t){var o,e,r=t.data.menu,n=m('[data-toggle="dropdown"]',t.data.toggle);if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)&&(t.preventDefault(),t.stopPropagation(),!n.is(".disabled, :disabled"))){if(27===t.which)return n.trigger("focus"),n.trigger("click");(o=r.find("li:not(.disabled):visible a:not(.btn), li:visible a.btn:not(.disabled)")).length&&(e=o.index(t.target),38===t.which&&0<e&&e--,40===t.which&&e<o.length-1&&e++,~e||(e=0),o.eq(e).trigger("focus"))}}function O(t){var o,e,r,n,i,s,a,d=m(t.target),l=d.data("st-menu");void 0!==l&&(null===(a=t.data).originalBodyPad&&null===a.originalBodyOverflowY||(a.$body.css({"padding-right":a.originalBodyPad,"overflow-y":a.originalBodyOverflowY}),a.originalBodyPad=null,a.originalBodyOverflowY=null),d.off("keydown.fxp.dropdownposition.data-api",C),l.off("keydown.fxp.dropdownposition.data-api",C),d.data("st-contentContainer").off("scroll.fxp.dropdownposition"+self.guid,k),o=d.data("st-contentMenu"),n=d.data("st-wrapperMask"),e=d.data("st-wrapper"),r=m(e.clone(!1).get(0).outerHTML),i=d.data("st-restoreMenu"),s=1e3*parseFloat(e.css("transition-duration")),0<r.prop("id").length&&r.prop("id",r.prop("id")+"_hide_transition"),e.before(r),e.removeClass("wrapper-open"),"function"==typeof m.fn.scroller&&l.scroller("destroy"),i.after(o),i.remove(),e.remove(),l.removeAttr("data-dropdown-restore-id"),l.css({"margin-right":"",overflow:"",width:"",height:""}),d.removeData("st-menu").removeData("st-contentMenu").removeData("st-wrapperMask").removeData("st-wrapper").removeData("st-restoreMenu").removeData("st-contentContainer"),window.setTimeout(function(){r.removeClass("wrapper-open"),n.removeClass("wrapper-open"),window.setTimeout(function(){void 0!==l&&(n.remove(),r.remove())},s)},1))}function u(t){var o,e,r,n,i,s,a,d,l,p,c,u,f,h=t.data,w="dropdown-menu-original-"+h.guid,g=m("body"),b=m(t.target),y=b.data("st-menu");void 0!==y&&O(t),0===(c=m(".dropdown-menu",l=t.target)).length&&(p=m(".dropdown-menu-restore-position",l).attr("data-dropdown-restore-for"),c=m("[data-dropdown-restore-id="+p+"]")),(y=c).css("display","none"),f=parseInt((u=t.data).$body.css("padding-right")||0,10),u.$body.get(0).scrollHeight>document.documentElement.clientHeight&&"hidden"!==u.$body.css("overflow-y")&&(u.originalBodyPad=document.body.style.paddingRight||"",u.originalBodyOverflowY=document.body.style.overflowY||"",u.$body.css({"padding-right":f+u.nativeScrollWidth+"px","overflow-y":"hidden"})),y.css("display",""),n=y,s=m('<div class="wrapper-dropdown-position-mask"></div>'),i=m('<div class="wrapper-dropdown-position"></div>'),b.data("st-menu",y),b.data("st-contentMenu",n),b.data("st-wrapperMask",s),b.data("st-wrapper",i),b.data("st-contentContainer",b.parents("[data-dropdown-position-container]")),y.attr("class").trim().split(" ").forEach(function(t){i.addClass("wrapper-"+t),s.addClass("wrapper-"+t)}),y.parent().hasClass("dropup")&&i.addClass("wrapper-dropup"),y.hasClass("pull-right")&&(s.addClass("wrapper-pull-right"),i.addClass("wrapper-pull-right")),y.hasClass("pull-height")&&(s.addClass("wrapper-pull-height"),i.addClass("wrapper-pull-height")),e=Math.max(x(i),x(y)),e=Math.max(function(t){var o,e,r=x(t),n=t.parents();for(e=0;e<n.length;e+=1)o=parseInt(n.eq(e).css("z-index"),0),isNaN(o)||(r=Math.max(r,o));return r}(b),e),e=Math.max(e,1),m(".dropdown-backdrop").css("z-index",e),s.css({position:"fixed","z-index":e,left:0,right:0,top:0,bottom:0}),i.css({"z-index":e,"border-top-width":y.css("border-top-width"),"border-top-style":y.css("border-top-style"),"border-top-color":y.css("border-top-color"),"border-bottom-width":y.css("border-bottom-width"),"border-bottom-style":y.css("border-bottom-style"),"border-bottom-color":y.css("border-bottom-color"),"border-left-width":y.css("border-left-width"),"border-left-style":y.css("border-left-style"),"border-left-color":y.css("border-left-color"),"border-right-width":y.css("border-right-width"),"border-right-style":y.css("border-right-style"),"border-right-color":y.css("border-right-color"),"box-shadow":y.css("box-shadow"),"border-top-left-radius":y.css("border-top-left-radius"),"border-top-right-radius":y.css("border-top-right-radius"),"border-bottom-left-radius":y.css("border-bottom-left-radius"),"border-bottom-right-radius":y.css("border-bottom-right-radius"),"background-color":y.css("background-color")}),(a=m('<div class="dropdown-menu-restore-position"></div>')).attr("data-dropdown-restore-for",w),d=y.offset(),b.data("st-restoreMenu",a),y.after(a),i.append(y),g.append(m(".dropdown-backdrop",a.parent())),g.append(s),g.append(i),"function"==typeof m.fn.scroller&&(r=m('<div class="dropdown-position-content"></div>'),y.before(r),r.append(y),(y=r).scroller()),v(i,y,d),i.addClass("wrapper-open"),s.addClass("wrapper-open"),b.data("st-contentContainer").on("scroll.fxp.dropdownposition"+h.guid,null,h,k),navigator.userAgent.match(/chrome/i)&&(o=1e3*parseFloat(i.css("transition-duration")),window.setTimeout(function(){if(void 0!==i){var t=parseInt(i.css("max-height"),10);i.css("max-height",t+1+"px"),window.setTimeout(function(){i.css("max-height",t+"px")},10)}},o)),b.on("keydown.fxp.dropdownposition.data-api",null,{menu:y,toggle:b},C),y.on("keydown.fxp.dropdownposition.data-api",null,{menu:y,toggle:b},C)}function k(){m('[data-toggle="dropdown"]').each(function(){var t=m(this);t.parent().hasClass("open")&&t.dropdown("toggle")})}var a=function(t){function a(t){var o,e,r,n,i,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return d(this,a),e=this,(o=!(r=l(a).call(this,t,s))||"object"!=typeof r&&"function"!=typeof r?c(e):r).$body=m("body"),o.nativeScrollWidth=((i=document.createElement("div")).style.width="100px",i.style.height="100px",i.style.overflow="scroll",i.style.position="absolute",i.style.top="-9999px",document.body.appendChild(i),n=i.offsetWidth-i.clientWidth,document.body.removeChild(i),n),o.originalBodyPad=null,o.originalBodyOverflowY=null,o.$element.on("shown.bs.dropdown.fxp.dropdownposition"+o.guid,null,c(c(o)),u).on("hide.bs.dropdown.fxp.dropdownposition"+o.guid,null,c(c(o)),O),m(window).on("resize.fxp.dropdownposition scroll.fxp.dropdownposition"+o.guid,null,c(c(o)),k),o}return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&e(t,o)}(a,s),o(a,[{key:"refresh",value:function(t,o){var e,r,n=m(t),i=n.parents(".wrapper-dropdown-position"),s=i.find(".dropdown-position-content");n.hasClass("dropdown-menu")&&0!==i.length&&(e=i.offset().left,r=i.width(),s.css({width:"",height:""}),s.css({width:i.width(),height:i.height()}),i.hasClass("wrapper-pull-right")&&i.width()!==r&&(e+=r-i.width(),i.css("left",e)),"function"==typeof m.fn.scroller&&s.scroller("resizeScrollbar"))}},{key:"destroy",value:function(){var t=new CustomEvent("destroy");t.target=this.$element.get(0),O(t),this.$element.off("shown.bs.dropdown.fxp.dropdownposition"+this.guid,u).off("hide.bs.dropdown.fxp.dropdownposition"+this.guid,O),m(window).off("resize.fxp.dropdownposition scroll.fxp.dropdownposition"+this.guid,k),n(l(a.prototype),"destroy",this).call(this)}}]),a}();return function(o,a,d){var t=3<arguments.length&&void 0!==arguments[3]&&arguments[3],e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,l=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"destroy",r=m.fn[o];m.fn[o]=function(){for(var n,t,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length,s=Array(1<o?o-1:0),e=1;e<o;e++)s[e-1]=arguments[e];return 1===(t=this.each(function(t,o){var e=m(o),r=e.data(a);r||(r=new d(o,"object"===p(i)?i:{}),e.data(a,r)),"string"==typeof i&&r&&(r[i]?n=(n=r[i].apply(r,s))!==r?n:void 0:r.constructor[i]&&(n=(n=r.constructor[i].apply(r,s))!==r?n:void 0),i===l&&e.removeData(a))})).length&&void 0!==n?n:t},m.fn[o].Constructor=d,t&&(m[o]=function(t){return m({})[o](t)}),m.fn[o].noConflict=function(){return m.fn[o]=r},null!==e&&m(window).on("load",function(){m(e).each(function(){var t=m(this);m.fn[o].call(t,t.data())})})}("dropdownPosition","fxp.dropdownposition",a,!0,document),t.default=a,t}({},jQuery);
